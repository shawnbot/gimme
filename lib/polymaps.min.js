if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function fa(d){var f=d.indexOf(":");return f<0?d:{space:s.ns[d.substring(0,f)],local:d.substring(f+1)}}function Q(){for(var d=0;d<Q.maps.length;d++)Q.maps[d].resize()}function U(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function V(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function Z(d,f){if(d.row>f.row){var a=d;d=f;f=a}return{x0:d.column,y0:d.row,x1:f.column,y1:f.row,dx:f.column-d.column,dy:f.row-d.row}}function ca(d,f,a,i,h){a=Math.max(a,Math.floor(f.y0));
i=Math.min(i,Math.ceil(f.y1));if(d.x0==f.x0&&d.y0==f.y0?d.x0+f.dy/d.dy*d.dx<f.x1:d.x1-f.dy/d.dy*d.dx<f.x0){var c=d;d=f;f=c}c=d.dx/d.dy;var e=f.dx/f.dy,r=d.dx>0,o=f.dx<0;for(a=a;a<i;a++){var n=c*Math.max(0,Math.min(d.dy,a+r-d.y0))+d.x0;h(Math.floor(e*Math.max(0,Math.min(f.dy,a+o-f.y0))+f.x0),Math.ceil(n),a)}}function da(d,f,a,i,h,c){var e=Z(d,f);f=Z(f,a);d=Z(a,d);if(e.dy>f.dy){a=e;e=f;f=a}if(e.dy>d.dy){a=e;e=d;d=a}if(f.dy>d.dy){a=f;f=d;d=a}e.dy&&ca(d,e,i,h,c);f.dy&&ca(d,f,i,h,c)}s.version="2.2.0+1";
var Y={x:0,y:0};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,d)};s.transform=function(d,f,a,i,h,c){var e={},r,o,n;if(!arguments.length){d=1;f=h=a=0;i=1;c=0}e.zoomFraction=function(l){if(!arguments.length)return o;o=l;r=Math.floor(o+Math.log(Math.sqrt(d*d+f*f+a*a+i*i))/Math.log(2));n=Math.pow(2,-r);return e};e.apply=function(l){var g=Math.pow(2,-l.zoom),
k=Math.pow(2,l.zoom-r);return{column:(d*l.column*g+a*l.row*g+h)*k,row:(f*l.column*g+i*l.row*g+c)*k,zoom:l.zoom-r}};e.unapply=function(l){var g=Math.pow(2,-l.zoom),k=Math.pow(2,l.zoom+r);return{column:(l.column*g*i-l.row*g*a-h*i+c*a)/(d*i-f*a)*k,row:(l.column*g*f-l.row*g*d-h*f+c*d)/(a*f-i*d)*k,zoom:l.zoom+r}};e.toString=function(){return"matrix("+[d*n,f*n,a*n,i*n].join(" ")+" 0 0)"};return e.zoomFraction(0)};s.cache=function(d,f){function a(g){l--;f&&f(g);delete e[g.key];if(g.next)g.next.prev=g.prev;
else if(o=g.prev)o.next=null;if(g.prev)g.prev.next=g.next;else if(r=g.next)r.prev=null}function i(){for(var g=o;l>n;g=g.prev){if(!g)break;g.lock||a(g)}}var h={},c={},e={},r=null,o=null,n=64,l=0;h.peek=function(g){return e[[g.zoom,g.column,g.row].join("/")]};h.load=function(g,k){var u=[g.zoom,g.column,g.row].join("/"),y=e[u];if(y){if(y.prev){if(y.prev.next=y.next)y.next.prev=y.prev;else o=y.prev;y.prev=null;y.next=r;r=r.prev=y}y.lock=1;return c[u]=y}y={key:u,column:g.column,row:g.row,zoom:g.zoom,next:r,
prev:null,lock:1};d.call(null,y,k);c[u]=e[u]=y;if(r)r.prev=y;else o=y;r=y;l++;return y};h.unload=function(g){if(!(g in c))return false;var k=c[g];k.lock=0;delete c[g];k.request&&k.request.abort(false)&&a(k);return k};h.locks=function(){return c};h.size=function(g){if(!arguments.length)return n;n=g;i();return h};h.flush=function(){i();return h};h.clear=function(){for(var g in e){var k=e[g];k.request&&k.request.abort(false);f&&f(e[g]);if(k.lock){k.lock=0;k.element.parentNode.removeChild(k.element)}}c=
{};e={};r=o=null;l=0;return h};return h};s.url=function(d){function f(i){var h=i.zoom<0?1:1<<i.zoom,c=i.column%h;if(c<0)c+=h;return d.replace(/{(.)}/g,function(e,r){switch(r){case "S":return a[(Math.abs(i.zoom)+i.row+c)%a.length];case "Z":return i.zoom;case "X":return c;case "Y":return i.row;case "B":var o=s.map.coordinateLocation({row:i.row,column:c,zoom:i.zoom}),n=s.map.coordinateLocation({row:i.row+1,column:c+1,zoom:i.zoom}),l=Math.ceil(Math.log(i.zoom)/Math.LN2);return n.lat.toFixed(l)+","+o.lon.toFixed(l)+
","+o.lat.toFixed(l)+","+n.lon.toFixed(l)}return r})}var a=[];f.template=function(i){if(!arguments.length)return d;d=i;return f};f.hosts=function(i){if(!arguments.length)return a;a=i;return f};return f};s.dispatch=function(d){var f={};d.on=function(a,i){for(var h=f[a]||(f[a]=[]),c=0;c<h.length;c++)if(h[c].handler==i)return d;h.push({handler:i,on:true});return d};d.off=function(a,i){var h=f[a];if(h)for(var c=0;c<h.length;c++){var e=h[c];if(e.handler==i){e.on=false;h.splice(c,1);break}}return d};return function(a){var i=
f[a.type];if(i){i=i.slice();for(var h=0;h<i.length;h++){var c=i[h];c.on&&c.handler.call(d,a)}}}};s.queue=function(){function d(){if(!(c>=e||!h.length)){c++;h.pop()()}}function f(o){for(var n=0;n<h.length;n++)if(h[n]==o){h.splice(n,1);return true}return false}function a(o,n,l){function g(){k=new XMLHttpRequest;l&&k.overrideMimeType(l);k.open("GET",o,true);k.onreadystatechange=function(){if(k.readyState==4){c--;k.status<300&&n(k);d()}};k.send(null)}var k;h.push(g);d();return{abort:function(u){if(f(g))return true;
if(u&&k){k.abort();return true}return false}}}function i(o,n,l){l||(l="callback");var g=i.prefix+ ++i.id,k=document.createElement("script");window[g]=function(u){n(u);delete window[g];r.removeChild(k)};o+=(o.indexOf("?")>-1?"&":"?")+l+"="+g;k.setAttribute("src",o);k.setAttribute("type","text/javascript");r.appendChild(k);return{abort:function(){delete window[g];r.removeChild(k);return false}}}var h=[],c=0,e=6,r=document.getElementsByTagName("head")[0]||document.documentElement;i.id=0;i.prefix="pojsp";
i.param="callback";return{text:function(o,n,l){return a(o,function(g){g.responseText&&n(g.responseText)},l)},xml:function(o,n){return a(o,function(l){l.responseXML&&n(l.responseXML)},"application/xml")},json:function(o,n){return a(o,function(l){l.responseText&&n(JSON.parse(l.responseText))},"application/json")},jsonp:i,image:function(o,n,l){function g(){k=document.createElement("img");k.onerror=function(){c--;d()};k.onload=function(){c--;l(k);d()};k.src=n;o.setAttributeNS(s.ns.xlink,"href",n)}var k;
h.push(g);d();return{abort:function(u){if(f(g))return true;if(u&&k){k.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(k)if(n<k[0])n=k[0];else if(n>k[1])n=k[1];l=n-(n=Math.round(n));g=Math.pow(2,l)}function f(){if(v){var j=45/Math.pow(2,n+l-3),t=Math.max(Math.abs(C*e.x+y*e.y),Math.abs(A*e.x+E*e.y)),z=U(m-t*j/r.y);t=U(q+t*j/r.y);o.lat=Math.max(z,Math.min(t,o.lat));z=Math.max(Math.abs(C*e.y+y*e.x),Math.abs(A*e.y+E*e.x));o.lon=Math.max(v[0].lon-z*j/r.x,Math.min(v[1].lon+
z*j/r.x,o.lon))}}var a={},i,h,c=Y,e=Y,r={x:256,y:256},o={lat:37.76487,lon:-122.41948},n=12,l=0,g=1,k=[1,18],u=0,y=1,C=0,E=1,A=0,m=-180,q=180,v=[{lat:U(m),lon:-Infinity},{lat:U(q),lon:Infinity}];a.locationCoordinate=function(j){j=s.map.locationCoordinate(j);var t=Math.pow(2,n);j.column*=t;j.row*=t;j.zoom+=n;return j};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(j,t){var z=Math.pow(2,n-t.zoom),F=Math.pow(2,n-j.zoom),x=(t.column*z-j.column*F)*r.x*g;z=(t.row*z-j.row*F)*r.y*
g;return{x:e.x+y*x-C*z,y:e.y+C*x+y*z}};a.pointCoordinate=function(j,t){var z=Math.pow(2,n-j.zoom),F=(t.x-e.x)/g,x=(t.y-e.y)/g;return{column:j.column*z+(E*F-A*x)/r.x,row:j.row*z+(A*F+E*x)/r.y,zoom:n}};a.locationPoint=function(j){var t=Math.pow(2,n+l-3)/45,z=(j.lon-o.lon)*t*r.x;j=(V(o.lat)-V(j.lat))*t*r.y;return{x:e.x+y*z-C*j,y:e.y+C*z+y*j}};a.pointLocation=function(j){var t=45/Math.pow(2,n+l-3),z=(j.x-e.x)*t;j=(j.y-e.y)*t;return{lon:o.lon+(E*z-A*j)/r.x,lat:U(V(o.lat)-(A*z+E*j)/r.y)}};var B=s.svg("rect");
B.setAttribute("visibility","hidden");B.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return i;i=j;i.setAttribute("class","map");i.appendChild(B);return a.resize()};a.focusableParent=function(){for(var j=i;j;j=j.parentNode)if(j.tabIndex>=0)return j;return window};a.mouse=function(j){var t=(i.ownerSVGElement||i).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var z=document.body.appendChild(s.svg("svg"));z.style.position="absolute";z.style.top=z.style.left=
"0px";var F=z.getScreenCTM();$=!(F.f||F.e);document.body.removeChild(z)}if($){t.x=j.pageX;t.y=j.pageY}else{t.x=j.clientX;t.y=j.clientY}return t.matrixTransform(i.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;h=j;return a.resize()};a.resize=function(){if(h){c=h;Q.remove(a)}else{B.setAttribute("width","100%");B.setAttribute("height","100%");b=B.getBBox();c={x:b.width,y:b.height};Q.add(a)}B.setAttribute("width",c.x);B.setAttribute("height",c.y);e={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});
return a};a.tileSize=function(j){if(!arguments.length)return r;r=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return o;o=j;f();a.dispatch({type:"move"});return a};a.panBy=function(j){var t=45/Math.pow(2,n+l-3),z=j.x*t;j=j.y*t;return a.center({lon:o.lon+(A*j-E*z)/r.x,lat:U(V(o.lat)+(A*z+E*j)/r.y)})};a.centerRange=function(j){if(!arguments.length)return v;if(v=j){m=v[0].lat>-90?V(v[0].lat):-Infinity;q=v[0].lat<90?V(v[1].lat):Infinity}else{m=-Infinity;q=Infinity}f();
a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return n+l;n=j;d();return a.center(o)};a.zoomBy=function(j,t,z){if(arguments.length<2)return a.zoom(n+l+j);if(arguments.length<3)z=a.pointLocation(t);n=n+l+j;d();var F=a.locationPoint(z);return a.panBy({x:t.x-F.x,y:t.y-F.y})};a.zoomRange=function(j){if(!arguments.length)return k;k=j;return a.zoom(n+l)};a.extent=function(j){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var t=a.locationPoint(j[0]),
z=a.locationPoint(j[1]),F=Math.max((z.x-t.x)/c.x,(t.y-z.y)/c.y);t=a.pointLocation({x:(t.x+z.x)/2,y:(t.y+z.y)/2});n=n+l-Math.log(F)/Math.log(2);d();return a.center(t)};a.angle=function(j){if(!arguments.length)return u;u=j;y=Math.cos(u);C=Math.sin(u);E=Math.cos(-u);A=Math.sin(-u);f();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=s.dispatch(a);return a};Q.maps=[];Q.add=function(d){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==
d)return;Q.maps.push(d)};Q.remove=function(d){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==d){Q.maps.splice(f,1);return}};window.addEventListener("resize",Q,false);s.map.locationCoordinate=function(d){var f=1/360;return{column:(d.lon+180)*f,row:(180-V(d.lat))*f,zoom:0}};s.map.coordinateLocation=function(d){var f=45/Math.pow(2,d.zoom-3);return{lon:f*d.column-180,lat:U(180-f*d.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(d,f){function a(A){for(var m=C[0].nextSibling;y<A;y++){k.insertBefore(C[-4],
m);k.insertBefore(C[2],m);k.insertBefore(C[1],m);for(var q=C[-4],v=-4;v<2;)C[v]=C[++v];C[v]=q}}function i(A){for(var m=C[0].nextSibling;y>A;y--){k.insertBefore(C[-1],m);k.insertBefore(C[2],C[-4]);for(var q=C[2],v=2;v>-4;)C[v]=C[--v];C[v]=q}}function h(){function A(L){var H=L.zoom,R=H<0?1:1<<H,S=L.column%R,w=L.row;if(S<0)S+=R;return{locationPoint:function(D){D=s.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:z.x*(G*D.column-S),y:z.y*(G*D.row-w)}}}}function m(L,H,R){var S=O.zoom,w=2-
T,D=4+T;for(L=L;L<H;L++){var G=e.load({column:L,row:R,zoom:S},A);if(!G.ready&&!(G.key in N)){G.proxyRefs={};for(var J,K,M,P=1;P<=w;P++){K=true;for(var W=0,ea=1<<P;W<=ea;W++)for(var aa=0;aa<=ea;aa++)if((M=e.peek(J={column:(L<<P)+aa,row:(R<<P)+W,zoom:S+P}))&&M.ready){N[M.key]=e.load(J);M.proxyCount++;G.proxyRefs[M.key]=M}else K=false;if(K)break}if(!K)for(P=1;P<=D;P++)if((M=e.peek(J={column:L>>P,row:R>>P,zoom:S-P}))&&M.ready){N[M.key]=e.load(J);M.proxyCount++;G.proxyRefs[M.key]=M;break}}N[G.key]=G}}
var q=c.map(),v=q.zoom(),B=v-(v=Math.round(v)),j=q.size(),t=q.angle(),z=q.tileSize(),F=q.locationCoordinate(q.center());if(y!=v){if(y<v)a(v);else if(y>v)i(v);else y=v;for(var x=-4;x<=2;x++){var X=C[x];X.setAttribute("class","zoom"+(x<0?"":"+")+x+" zoom"+(v+x));X.setAttribute("transform","scale("+Math.pow(2,-x)+")")}}k.setAttribute("transform","translate("+j.x/2+","+j.y/2+")"+(t?"rotate("+t/Math.PI*180+")":"")+(B?"scale("+Math.pow(2,B)+")":"")+(u?u.zoomFraction(B):""));var O=q.pointCoordinate(F,Y);
x=q.pointCoordinate(F,{x:j.x,y:0});v=q.pointCoordinate(F,j);q=q.pointCoordinate(F,{x:0,y:j.y});if(!B&&!t&&!u){F.column=(Math.round(z.x*F.column)+(j.x&1)/2)/z.x;F.row=(Math.round(z.y*F.row)+(j.y&1)/2)/z.y}if(u){O=u.unapply(O);x=u.unapply(x);v=u.unapply(v);q=u.unapply(q);F=u.unapply(F)}var T=n?n(O.zoom)-O.zoom:0;if(T){t=Math.pow(2,T);O.column*=t;O.row*=t;x.column*=t;x.row*=t;v.column*=t;v.row*=t;q.column*=t;q.row*=t;O.zoom=x.zoom=v.zoom=q.zoom+=T}B=e.locks();var N={};for(var I in B)B[I].proxyCount=
0;if(o&&T>-5&&T<3){t=O.zoom<0?1:1<<O.zoom;if(r){da(O,x,v,0,t,m);da(v,q,O,0,t,m)}else{j=Math.floor((O.column+v.column)/2);t=Math.max(0,Math.min(t-1,Math.floor((x.row+q.row)/2)));x=Math.min(4,O.zoom);j=j>>x<<x;t=t>>x<<x;m(j,j+1,t)}}for(I in N){x=N[I];t=Math.pow(2,x.level=x.zoom-F.zoom);j=z.x*(x.column-F.column*t);t=z.y*(x.row-F.row*t);x.element.setAttribute("transform","translate("+j+","+t+")")}for(I in B)if(!(I in N)){x=e.unload(I);x.element.parentNode.removeChild(x.element);delete x.proxyRefs}for(I in N){x=
N[I];if(x.element.parentNode!=C[x.level]){C[x.level].appendChild(x.element);c.show&&c.show(x)}}e.flush()}var c={},e=c.cache=s.cache(d,f).size(512),r=true,o=true,n,l,g,k=s.svg("g"),u,y,C={};k.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=k.appendChild(s.svg("g"));for(E=2;E>=1;E--)C[E]=k.appendChild(s.svg("g"));C[0]=k.appendChild(s.svg("g"));c.map=function(A){if(!arguments.length)return g;if(g){if(g==A){k.parentNode.appendChild(k);return c}g.off("move",h).off("resize",h);k.parentNode.removeChild(k)}if(g=
A){g.container().appendChild(k);c.init&&c.init(k);g.on("move",h).on("resize",h);h()}return c};c.container=function(){return k};c.id=function(A){if(!arguments.length)return l;l=A;k.setAttribute("id",A);return c};c.visible=function(A){if(!arguments.length)return o;(o=A)?k.removeAttribute("visibility"):k.setAttribute("visibility","hidden");g&&h();return c};c.transform=function(A){if(!arguments.length)return u;u=A;g&&h();return c};c.zoom=function(A){if(!arguments.length)return n;n=typeof A=="function"||
A==null?A:function(){return A};g&&h();return c};c.tile=function(A){if(!arguments.length)return r;r=A;g&&h();return c};c.reload=function(){e.clear();g&&h();return c};c.dispatch=s.dispatch(c);c.on("load",function(A){if(A.tile.proxyRefs){for(var m in A.tile.proxyRefs){var q=A.tile.proxyRefs[m];--q.proxyCount<=0&&e.unload(m)&&q.element.parentNode.removeChild(q.element)}delete A.tile.proxyRefs}});return c};s.image=function(){var d=s.layer(function(a){var i=a.element=s.svg("image"),h=d.map().tileSize();
i.setAttribute("preserveAspectRatio","none");i.setAttribute("width",h.x);i.setAttribute("height",h.y);i.setAttribute("opacity",0);if(typeof f=="function")a.request=s.queue.image(i,f(a),function(c){delete a.request;a.ready=true;a.img=c;i.removeAttribute("opacity");d.dispatch({type:"load",tile:a})});else{a.ready=true;i.setAttributeNS(s.ns.xlink,"href",f);d.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),f="about:blank";d.url=function(a){if(!arguments.length)return f;
f=typeof a=="string"&&/{.}/.test(a)?s.url(a):a;return d.reload()};return d};s.geoJson=function(d){function f(m,q){return m&&m.type in C&&C[m.type](m,q)}function a(m,q){var v=q({lat:m[1],lon:m[0]}),B=s.svg("circle");B.setAttribute("r",4.5);B.setAttribute("cx",v.x);B.setAttribute("cy",v.y);return B}function i(m,q,v,B){B.push("M");for(var j=0;j<m.length-q;j++){p=v({lat:m[j][1],lon:m[j][0]});B.push(p.x);B.push(",");B.push(p.y);B.push("L")}B.pop()}function h(m,q,v,B){for(var j=0;j<m.length;j++)i(m[j],
q,v,B);q&&B.push("Z")}function c(m,q,v,B){for(var j=[],t=0;t<q.length;t++)m(q[t],v,B,j);if(j.length){m=s.svg("path");m.setAttribute("d",j.join(""));return m}}var e=s.layer(function(m,q){function v(j){var t=[];if(j.next)m.request=d(j.next.href,v);switch(j.type){case "FeatureCollection":for(var z=0;z<j.features.length;z++){var F=j.features[z],x=f(F.geometry,q.locationPoint);x&&t.push({element:B.appendChild(x),data:F})}break;case "Feature":(x=f(j.geometry,q.locationPoint))&&t.push({element:B.appendChild(x),
data:j});break;default:(x=f(j,q.locationPoint))&&t.push({element:B.appendChild(x),data:{type:"Feature",geometry:j}});break}m.ready=true;t.push.apply(m.features,t);e.dispatch({type:"load",tile:m,features:t})}var B=m.element=s.svg("g");m.features=[];q=q(m);if(y)v({type:"FeatureCollection",features:y});else m.request=d(typeof o=="function"?o(m):o,v)},function(m){m.request&&m.request.abort(true)}),r=e.container(),o="about:blank",n=true,l="org.polymaps."+s.id(),g="url(#"+l+")",k=r.insertBefore(s.svg("clipPath"),
r.firstChild),u=k.appendChild(s.svg("rect")),y;r.setAttribute("fill-rule","evenodd");k.setAttribute("id",l);if(!arguments.length)d=s.queue.json;var C={Point:function(m,q){return a(m.coordinates,q)},MultiPoint:function(m,q){for(var v=s.svg("g"),B=0;B<m.coordinates.length;B++)v.appendChild(a(m.coordinates[B],q));return v},LineString:function(m,q){return c(i,[m.coordinates],0,q)},MultiLineString:function(m,q){return c(i,m.coordinates,0,q)},Polygon:function(m,q){return c(h,[m.coordinates],1,q)},MultiPolygon:function(m,
q){return c(h,m.coordinates||m.coords,1,q)},GeometryCollection:function(m,q){for(var v=s.svg("g"),B=0;B<m.geometries.length;B++){var j=f(m.geometries[B],q);j&&v.appendChild(j)}return v}};e.url=function(m){if(!arguments.length)return o;o=typeof m=="string"&&/{.}/.test(m)?s.url(m):m;typeof o=="string"&&e.tile(false);return e.reload()};e.features=function(m){if(!arguments.length)return y;m&&e.tile(false);y=m;return e.reload()};e.clip=function(m){if(!arguments.length)return n;n&&r.removeChild(k);if(n=
m)r.insertBefore(k,r.firstChild);var q=e.cache.locks();for(var v in q)n?q[v].element.setAttribute("clip-path",g):q[v].element.removeAttribute("clip-path");return e};var E=e.tile;e.tile=function(m){arguments.length&&!m&&e.clip(m);return E.apply(e,arguments)};var A=e.map;e.map=function(m){if(m&&u){var q=m.tileSize();u.setAttribute("width",q.x);u.setAttribute("height",q.y)}return A.apply(e,arguments)};e.show=function(m){n?m.element.setAttribute("clip-path",g):m.element.removeAttribute("clip-path");e.dispatch({type:"show",
tile:m,features:m.features});return e};e.reshow=function(){var m=e.cache.locks();for(var q in m)e.show(m[q]);return e};return e};s.dblclick=function(){function d(c){var e=i.zoom();e=c.shiftKey?Math.ceil(e)-e-1:1-e+Math.floor(e);a==="mouse"?i.zoomBy(e,i.mouse(c)):i.zoomBy(e)}var f={},a="mouse",i,h;f.zoom=function(c){if(!arguments.length)return a;a=c;return f};f.map=function(c){if(!arguments.length)return i;if(i){h.removeEventListener("dblclick",d,false);h=null}if(i=c){h=i.container();h.addEventListener("dblclick",
d,false)}return f};return f};s.drag=function(){function d(e){if(!e.shiftKey){c={x:e.clientX,y:e.clientY};i.focusableParent().focus();e.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(e){if(c){i.panBy({x:e.clientX-c.x,y:e.clientY-c.y});c.x=e.clientX;c.y=e.clientY}}var a={},i,h,c;a.map=function(e){if(!arguments.length)return i;if(i){h.removeEventListener("mousedown",d,false);h=null}if(i=e){h=i.container();h.addEventListener("mousedown",d,false)}return a};window.addEventListener("mousemove",
f,false);window.addEventListener("mouseup",function(e){if(c){f(e);c=null;document.body.style.removeProperty("cursor")}},false);return a};s.wheel=function(){function d(){r=null}function f(l){var g=(l.wheelDelta/120||-l.detail)*0.1,k;if(ba<0){k=Date.now();var u=k-h;if(u>9&&Math.abs(l.wheelDelta)/u>=50)ba=1;h=k}if(ba==1)g*=0.03;if(!c&&g){k=Date.now();if(k-i>200){g=g>0?+1:-1;i=k}else g=0}if(g)switch(e){case "mouse":k=o.mouse(l);r||(r=o.pointLocation(k));o.off("move",d).zoomBy(g,k,r).on("move",d);break;
case "location":o.zoomBy(g,o.locationPoint(r),r);break;default:o.zoomBy(g);break}l.preventDefault();return false}var a={},i=0,h=0,c=true,e="mouse",r,o,n;a.smooth=function(l){if(!arguments.length)return c;c=l;return a};a.zoom=function(l,g){if(!arguments.length)return e;e=l;r=g;if(o)e=="mouse"?o.on("move",d):o.off("move",d);return a};a.map=function(l){if(!arguments.length)return o;if(o){n.removeEventListener("mousemove",d,false);n.removeEventListener("mousewheel",f,false);n.removeEventListener("DOMMouseScroll",
f,false);n=null;o.off("move",d)}if(o=l){e=="mouse"&&o.on("move",d);n=o.container();n.addEventListener("mousemove",d,false);n.addEventListener("mousewheel",f,false);n.addEventListener("DOMMouseScroll",f,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function d(u){if(!(u.ctrlKey||u.altKey||u.metaKey)){var y=Date.now(),C=0,E=0;switch(u.keyCode){case 37:if(!c.left){e=y;c.left=1;c.right||(C=l)}break;case 39:if(!c.right){e=y;c.right=1;c.left||(C=-l)}break;
case 38:if(!c.up){e=y;c.up=1;c.down||(E=l)}break;case 40:if(!c.down){e=y;c.down=1;c.up||(E=-l)}break;default:return}if(C||E)g.panBy({x:C,y:E});if(!r&&c.left|c.right|c.up|c.down)r=setInterval(i,n);u.preventDefault()}}function f(u){e=Date.now();switch(u.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(r&&!(c.left|c.right|c.up|c.down))r=clearInterval(r);u.preventDefault()}function a(u){switch(u.charCode){case 45:case 95:g.zoom(Math.ceil(g.zoom())-
1);break;case 43:case 61:g.zoom(Math.floor(g.zoom())+1);break;default:return}u.preventDefault()}function i(){if(g)if(!(Date.now()<e+o)){var u=(c.left-c.right)*l,y=(c.up-c.down)*l;if(u||y)g.panBy({x:u,y:y})}}var h={},c={left:0,right:0,up:0,down:0},e=0,r,o=250,n=50,l=16,g,k;h.map=function(u){if(!arguments.length)return g;if(g){k.removeEventListener("keypress",a,false);k.removeEventListener("keydown",d,false);k.removeEventListener("keyup",f,false);k=null}if(g=u){k=g.focusableParent();k.addEventListener("keypress",
a,false);k.addEventListener("keydown",d,false);k.addEventListener("keyup",f,false)}return h};h.speed=function(u){if(!arguments.length)return l;l=u;return h};return h};s.hash=function(){function d(){var e=c.center(),r=c.zoom(),o=Math.max(0,Math.ceil(Math.log(r)/Math.LN2));e="#"+r.toFixed(2)+"/"+e.lat.toFixed(o)+"/"+e.lon.toFixed(o);if(i!==e)location.replace(i=e)}function f(){if(location.hash!==i){var e=(i=location.hash).substring(1).split("/").map(Number);if(e.length<3||e.some(isNaN))d();else{var r=
c.size();c.zoomBy(e[0]-c.zoom(),{x:r.x/2,y:r.y/2},{lat:Math.min(h,Math.max(-h,e[1])),lon:e[2]})}}}var a={},i,h=89.99999999,c;a.map=function(e){if(!arguments.length)return c;if(c){c.off("move",d);window.removeEventListener("hashchange",f,false)}if(c=e){c.on("move",d);window.addEventListener("hashchange",f,false);location.hash?f():d()}return a};return a};s.interact=function(){var d={},f=s.drag(),a=s.wheel(),i=s.dblclick(),h=s.arrow();d.map=function(c){f.map(c);a.map(c);i.map(c);h.map(c);return d};return d};
s.compass=function(){function d(w){A.setAttribute("class","compass active");O||(O=setInterval(f,t));T&&H.panBy(T);B=Date.now();return l(w)}function f(){T&&Date.now()>B+j&&H.panBy(T)}function a(w){if(w.shiftKey){I={x0:H.mouse(w)};H.focusableParent().focus();return l(w)}}function i(w){if(I){I.x1=H.mouse(w);L.setAttribute("x",Math.min(I.x0.x,I.x1.x));L.setAttribute("y",Math.min(I.x0.y,I.x1.y));L.setAttribute("width",Math.abs(I.x0.x-I.x1.x));L.setAttribute("height",Math.abs(I.x0.y-I.x1.y));L.removeAttribute("display")}}
function h(){A.setAttribute("class","compass");if(I){if(I.x1){H.extent([H.pointLocation({x:Math.min(I.x0.x,I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),H.pointLocation({x:Math.max(I.x0.x,I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);L.setAttribute("display","none")}I=null}if(O){clearInterval(O);O=0}}function c(w){return function(){w?this.setAttribute("class","active"):this.removeAttribute("class");T=w}}function e(w){return function(D){A.setAttribute("class","compass active");var G=H.zoom();H.zoom(w<0?Math.ceil(G)-
1:Math.floor(G)+1);return l(D)}}function r(w){return function(D){H.zoom(w);return l(D)}}function o(){this.setAttribute("class","active")}function n(){this.removeAttribute("class")}function l(w){w.stopPropagation();w.preventDefault();return false}function g(w){var D=Math.SQRT1_2*q,G=q*0.7,J=q*0.2,K=s.svg("g"),M=K.appendChild(s.svg("path")),P=K.appendChild(s.svg("path"));M.setAttribute("class","direction");M.setAttribute("pointer-events","all");M.setAttribute("d","M0,0L"+D+","+D+"A"+q+","+q+" 0 0,1 "+
-D+","+D+"Z");P.setAttribute("class","chevron");P.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));P.setAttribute("pointer-events","none");K.addEventListener("mousedown",d,false);K.addEventListener("mouseover",c(w),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",l,false);return K}function k(w){var D=q*0.4,G=D/2,J=s.svg("g"),K=J.appendChild(s.svg("path")),M=J.appendChild(s.svg("path")),P=J.appendChild(s.svg("path")),W=J.appendChild(s.svg("path"));K.setAttribute("class",
"back");K.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");M.setAttribute("class","direction");M.setAttribute("d",K.getAttribute("d"));P.setAttribute("class","chevron");P.setAttribute("d","M"+-G+","+-D+"H"+G+(w>0?"M0,"+(-D-G)+"V"+-G:""));W.setAttribute("class","fore");W.setAttribute("fill","none");W.setAttribute("d",K.getAttribute("d"));J.addEventListener("mousedown",e(w),false);J.addEventListener("mouseover",o,false);J.addEventListener("mouseout",n,false);J.addEventListener("dblclick",
l,false);return J}function u(w){var D=q*0.2,G=q*0.4,J=s.svg("g"),K=J.appendChild(s.svg("rect")),M=J.appendChild(s.svg("path"));K.setAttribute("pointer-events","all");K.setAttribute("fill","none");K.setAttribute("x",-G);K.setAttribute("y",-0.75*G);K.setAttribute("width",2*G);K.setAttribute("height",1.5*G);M.setAttribute("class","chevron");M.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",r(w),false);J.addEventListener("dblclick",l,false);return J}function y(){var w=q+6,D=w,G=H.size();
switch(z){case "top-left":break;case "top-right":w=G.x-w;break;case "bottom-left":D=G.y-D;break;case "bottom-right":w=G.x-w;D=G.y-D;break}w="translate("+w+","+D+")";N&&N.setAttribute("transform",w);x&&x.setAttribute("transform",w);for(var J in m)J==H.zoom()?m[J].setAttribute("class","active"):m[J].removeAttribute("class")}function C(){for(;A.lastChild;)A.removeChild(A.lastChild);A.appendChild(L);if(X!="none"){N=A.appendChild(s.svg("g"));N.setAttribute("class","pan");var w=N.appendChild(s.svg("circle"));
w.setAttribute("class","back");w.setAttribute("r",q);N.appendChild(g({x:0,y:-v})).setAttribute("transform","rotate(0)");N.appendChild(g({x:v,y:0})).setAttribute("transform","rotate(90)");N.appendChild(g({x:0,y:v})).setAttribute("transform","rotate(180)");N.appendChild(g({x:-v,y:0})).setAttribute("transform","rotate(270)");w=N.appendChild(s.svg("circle"));w.setAttribute("fill","none");w.setAttribute("class","fore");w.setAttribute("r",q)}else N=null;if(F!="none"){x=A.appendChild(s.svg("g"));x.setAttribute("class",
"zoom");w=-0.5;if(F=="big"){m={};var D=H.zoomRange()[0];for(w=0;D<=H.zoomRange()[1];D++,w++)(m[D]=x.appendChild(u(D))).setAttribute("transform","translate(0,"+-(w+0.75)*q*0.4+")")}D=X=="none"?0.4:2;x.setAttribute("transform","translate(0,"+q*(/^top-/.test(z)?D+(w+0.5)*0.4:-D)+")");x.appendChild(k(+1)).setAttribute("transform","translate(0,"+-(w+0.5)*q*0.4+")");x.appendChild(k(-1)).setAttribute("transform","scale(-1)")}else x=null;y()}var E={},A=s.svg("g"),m={},q=30,v=16,B=0,j=250,t=50,z="top-left",
F="small",x,X="small",O,T,N,I,L=s.svg("rect"),H,R,S;A.setAttribute("class","compass");L.setAttribute("class","back fore");L.setAttribute("pointer-events","none");L.setAttribute("display","none");E.radius=function(w){if(!arguments.length)return q;q=w;H&&C();return E};E.speed=function(w){if(!arguments.length)return q;v=w;return E};E.position=function(w){if(!arguments.length)return z;z=w;H&&C();return E};E.pan=function(w){if(!arguments.length)return X;X=w;H&&C();return E};E.zoom=function(w){if(!arguments.length)return F;
F=w;H&&C();return E};E.map=function(w){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",a,false);R.removeChild(A);R=null;S.removeEventListener("mousemove",i,false);S.removeEventListener("mouseup",h,false);S=null;H.off("move",y).off("resize",y)}if(H=w){R=H.container();R.appendChild(A);R.addEventListener("mousedown",a,false);S=R.ownerDocument.defaultView;S.addEventListener("mousemove",i,false);S.addEventListener("mouseup",h,false);H.on("move",y).on("resize",y);C()}return E};return E};
s.grid=function(){function d(){var h=i.firstChild,c=a.size(),e=a.pointLocation(Y);a.pointLocation(c);var r=Math.pow(2,4-Math.round(a.zoom()));e.lat=Math.floor(e.lat/r)*r;e.lon=Math.ceil(e.lon/r)*r;for(var o;(o=a.locationPoint(e).x)<=c.x;e.lon+=r){h||(h=i.appendChild(s.svg("line")));h.setAttribute("x1",o);h.setAttribute("x2",o);h.setAttribute("y1",0);h.setAttribute("y2",c.y);h=h.nextSibling}for(;(o=a.locationPoint(e).y)<=c.y;e.lat-=r){h||(h=i.appendChild(s.svg("line")));h.setAttribute("y1",o);h.setAttribute("y2",
o);h.setAttribute("x1",0);h.setAttribute("x2",c.x);h=h.nextSibling}for(;h;){c=h.nextSibling;i.removeChild(h);h=c}}var f={},a,i=s.svg("g");i.setAttribute("class","grid");f.map=function(h){if(!arguments.length)return a;if(a){i.parentNode.removeChild(i);a.off("move",d).off("resize",d)}if(a=h){a.on("move",d).on("resize",d);a.container().appendChild(i);a.dispatch({type:"move"})}return f};return f};s.stylist=function(){function d(h){var c=h.features.length,e=f.length,r=a.length,o,n,l,g,k,u;for(k=0;k<c;++k)if(n=
(o=h.features[k]).element){o=o.data;for(u=0;u<e;++u){g=(l=f[u]).value;if(typeof g==="function")g=g.call(null,o);g==null?l.name.local?n.removeAttributeNS(l.name.space,l.name.local):n.removeAttribute(l.name):l.name.local?n.setAttributeNS(l.name.space,l.name.local,g):n.setAttribute(l.name,g)}for(u=0;u<r;++u){g=(l=a[u]).value;if(typeof g==="function")g=g.call(null,o);g==null?n.style.removeProperty(l.name):n.style.setProperty(l.name,g,l.priority)}if(g=i){if(typeof g==="function")g=g.call(null,o);for(;n.lastChild;)n.removeChild(n.lastChild);
g!=null&&n.appendChild(s.svg("title")).appendChild(document.createTextNode(g))}}}var f=[],a=[],i;d.attr=function(h,c){f.push({name:fa(h),value:c});return d};d.style=function(h,c,e){a.push({name:h,value:c,priority:arguments.length<3?null:e});return d};d.title=function(h){i=h;return d};return d}})(org.polymaps);
